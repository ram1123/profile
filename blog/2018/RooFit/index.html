<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> RooFit (Things that I used) | Ram Krishna Sharma </title> <meta name="author" content="Ram Krishna Sharma"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="academic-website, portfolio-website"> <meta property="og:site_name" content="Ram Krishna Sharma"> <meta property="og:type" content="article"> <meta property="og:title" content="Ram Krishna Sharma | RooFit (Things that I used)"> <meta property="og:url" content="https://ram1123.github.io/blog/2018/RooFit/"> <meta property="og:description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta property="og:locale" content="en"> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="RooFit (Things that I used)"> <meta name="twitter:description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <script type="application/ld+json">
    {
        "author":
        {
            "@type": "Person",
            "name": "Ram Krishna Sharma"
        },
        "url": "https://ram1123.github.io/blog/2018/RooFit/",
        "@type": "BlogPosting",
        "description": "A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design.
",
        "headline": "RooFit (Things that I used)",
        
        "sameAs": ["https://orcid.org/0000-0003-1181-1426", "https://scholar.google.com/citations?user=QZ2KRiEAAAAJ", "https://www.scopus.com/authid/detail.uri?authorId=35565265100", "https://github.com/ram1123", "https://www.linkedin.com/in/ram-krishna-sharma", "https://gitlab.com/rasharma"],
        
        "name": "Ram Krishna Sharma",
        "@context": "https://schema.org"
    }
  </script> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ram1123.github.io/blog/2018/RooFit/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Ram</span> Krishna Sharma </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/publications/">publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/">projects</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/">blog</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/tag/">tags</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/category/">category</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/talk/">talk</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">RooFit (Things that I used)</h1> <p class="post-meta"> August 21, 2018 </p> <p class="post-tags"> <a href="/blog/2018"> <i class="fa-solid fa-calendar fa-sm"></i> 2018 </a>   ·   <a href="/blog/tag/root"> <i class="fa-solid fa-hashtag fa-sm"></i> root</a>   <a href="/blog/tag/roofit"> <i class="fa-solid fa-hashtag fa-sm"></i> roofit</a>     ·   <a href="/blog/category/programming"> <i class="fa-solid fa-tag fa-sm"></i> programming</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h1 class="no_toc" id="table-of-contents">Table of Contents</h1> <ul id="markdown-toc"> <li><a href="#couple-of-small-scripts-that-i-used" id="markdown-toc-couple-of-small-scripts-that-i-used">couple of small scripts that I used</a></li> <li><a href="#some-nice-references" id="markdown-toc-some-nice-references">Some nice references</a></li> <li> <a href="#calculate-chi2ndf" id="markdown-toc-calculate-chi2ndf">Calculate Chi2/ndf</a> <ul> <li><a href="#method-1--using-roofit-function-chisquare" id="markdown-toc-method-1--using-roofit-function-chisquare">Method 1 : (Using RooFit function chiSquare)</a></li> <li><a href="#method-2-using-th1-method-chi2test" id="markdown-toc-method-2-using-th1-method-chi2test">Method 2: (Using TH1 method Chi2Test)</a></li> </ul> </li> <li><a href="#plotting-components-of-composite-pdfs" id="markdown-toc-plotting-components-of-composite-pdfs">plotting components of composite p.d.f.s</a></li> </ul> <hr> <h1 id="couple-of-small-scripts-that-i-used">couple of small scripts that I used</h1> <ol> <li>Compare the two workspaces: <a href="https://gist.github.com/ram1123/88233943beb031b63265417b9b93c6ce" rel="external nofollow noopener" target="_blank">https://gist.github.com/ram1123/88233943beb031b63265417b9b93c6ce</a> </li> <li>Read workspace: <a href="https://gist.github.com/ram1123/847d079cef00e503e884ed65aa9a8c58" rel="external nofollow noopener" target="_blank">https://gist.github.com/ram1123/847d079cef00e503e884ed65aa9a8c58</a> </li> <li>Get integral of RooRealVar: <a href="https://gist.github.com/ram1123/f6fce437307cce7b3fba2b25a3c9cc02" rel="external nofollow noopener" target="_blank">https://gist.github.com/ram1123/f6fce437307cce7b3fba2b25a3c9cc02</a> </li> <li>Read histo from ROOT file and fit using RooFit: <a href="https://gist.github.com/ram1123/42e5e95952f13abbe5d5e3adc65d7315" rel="external nofollow noopener" target="_blank">https://gist.github.com/ram1123/42e5e95952f13abbe5d5e3adc65d7315</a> </li> </ol> <h1 id="some-nice-references">Some nice references</h1> <ol> <li>RooStatsWorkbook (gitbook): <a href="https://roostatsworkbook.readthedocs.io/en/latest/introduction.html" rel="external nofollow noopener" target="_blank">https://roostatsworkbook.readthedocs.io/en/latest/introduction.html</a> 2.</li> </ol> <h1 id="calculate-chi2ndf">Calculate Chi2/ndf</h1> <h2 id="method-1--using-roofit-function-chisquare">Method 1 : (Using RooFit function chiSquare)</h2> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Double_t</span> <span class="nf">chiSquare</span><span class="p">(</span><span class="kt">int</span> <span class="n">nFitParam</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="p">;</span>
<span class="n">Double_t</span> <span class="n">chiSquare</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">pdfname</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">histname</span><span class="p">,</span> <span class="kt">int</span> <span class="n">nFitParam</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="k">const</span> <span class="p">;</span>
</code></pre></div></div> <ul> <li> <p><strong>RooPlot::chiSquare()</strong> gives us the <strong>chi2/dof</strong>.</p> </li> <li> <p>We can also provide the number of floating parameters if the curve is the result of the fit.</p> </li> <li> <p>If we have multiple curve or dataset then the chi2 is calculated from the last added dataset and curve. Or we can add explicitly the names of the curve and histogram in the RooPlot we would like to compare.</p> </li> <li> <p>Plot and histogram names are automatically chosen (do e.g. RooPlot::print()), but you can also choose them yourself by adding a Name(“blah”) argument to each plotOn call.</p> </li> </ul> <p>Reference:</p> <ol> <li><a href="https://root-forum.cern.ch/t/how-to-obtain-fit-goodness-in-roofit/8199/2?u=ramkrishna" rel="external nofollow noopener" target="_blank">https://root-forum.cern.ch/t/how-to-obtain-fit-goodness-in-roofit/8199/2?u=ramkrishna</a></li> </ol> <h2 id="method-2-using-th1-method-chi2test">Method 2: (Using TH1 method Chi2Test)</h2> <p>Reference: <a href="https://root.cern.ch/doc/master/classTH1.html#a6c281eebc0c0a848e7a0d620425090a5" rel="external nofollow noopener" target="_blank">link</a></p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Double_t</span> <span class="n">TH1</span><span class="o">::</span><span class="n">Chi2Test</span>  <span class="p">(</span>   <span class="k">const</span> <span class="n">TH1</span> <span class="o">*</span>     <span class="n">h2</span><span class="p">,</span>
<span class="n">Option_t</span> <span class="o">*</span>  <span class="n">option</span> <span class="o">=</span> <span class="s">"UU"</span><span class="p">,</span>
<span class="n">Double_t</span> <span class="o">*</span>  <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span>
<span class="p">)</span>       <span class="k">const</span>
</code></pre></div></div> <ul> <li>calculate chi2/ndf like this:</li> </ul> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      <span class="n">chi2ndf</span>  <span class="o">=</span> <span class="n">hData</span><span class="o">-&gt;</span><span class="n">Chi2Test</span><span class="p">(</span><span class="n">hPdf</span><span class="p">,</span><span class="s">"CHI2/NDFUW"</span><span class="p">);</span>
</code></pre></div></div> <p>Reference: <a href="https://github.com/MiT-HEP/MitEwk13TeV/blob/master/SignalExtraction/fitWm.C#L1901" rel="external nofollow noopener" target="_blank">link</a></p> <h1 id="plotting-components-of-composite-pdfs">plotting components of composite p.d.f.s</h1> <p>Reference: <a href="https://root.cern.ch/root/html/tutorials/roofit/rf205_compplot.C.html" rel="external nofollow noopener" target="_blank">https://root.cern.ch/root/html/tutorials/roofit/rf205_compplot.C.html</a></p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2018/ROOT-CheatSheet/">ROOT CheatSheet</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2018/Condor-Jobs/">Condor Jobs</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2022/CMSAN_GitWorkflow/">GitLab workflow for CMS-AN</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2018/awk/">awk command</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2018/vi-editor/">Vi-Editor</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2018/git/">Git CheatSheet</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2019/XDAQ-Basics/">XDAQ Basics</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2018/grep/">Grep command</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2018/Mac-Settings/">Mac Settings</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2018/CERN-EOS-Access/">EOS uses</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2018/Cpp-CheatSheet/">C++ CheatSheet</a> </li> <div id="giscus_thread" style="max-width: 800px; margin: 0 auto;"> <script>let giscusTheme=determineComputedTheme(),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"ram1123/ram1123.github.io","data-repo-id":"R_kgDOLv844Q","data-category":"Comments","data-category-id":"DIC_kwDOLv844c4Ce2wf","data-mapping":"pathname","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,e])=>giscusScript.setAttribute(t,e)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Ram Krishna Sharma. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: June 11, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>